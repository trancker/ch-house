<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lexend+Deca&display=swap" rel="stylesheet">
    <link href="//db.onlinewebfonts.com/c/c87f06ae40c78321844f2eac8b51737f?family=Corbel" rel="stylesheet" type="text/css"/>
    <link href="/css/test.css" rel="stylesheet" type="text/css"/>
    <link rel="shortcut icon" href="/images/logo.png" type="image/png">
    <title><%= testName %></title>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2 left-side">
                <div class="row mt-4">
                    <div class="col-12 text-center mt-3 welcome">
                        <h2><%= testName %></h2>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 text-center mt-2 welcome">
                        <h6>Class - <%= className %></h6>
                    </div>
                </div>
                <hr class="mt-4" style="height: 0.15rem; width: 70%; background-color: #272926; margin: auto;">
                <div class="row mt-3">
                    <div class="col-12 text-center name">
                        <h2><%= name %></h2>
                    </div>
                    <div class="col-12 text-center typeOfUser">
                        <h4>Student</h4>
                    </div>
                </div>
                <hr class="mt-4" style="height: 0.15rem; width: 70%; background-color: #272926; margin: auto;">
                <div class="col-12 date text-center">
                    <h3><%= testDate %></h3>
                </div>
            </div>
            <div class="col-md-8 middle test">
                <div class="test-box shadow">
                    <div class="row">
                        <div class="col-12 text-center">
                            <embed src="<%- testpdfUrl %>#toolbar=0" type="application/pdf" width="755rem" height="900px" class="shadow"/>
                        </div>
                    </div>
                </div>
            </div>
            <p hidden id="timegiven"><%= testTime %></p>
            <div class="col-md-2 right-side">
                <div class="row mt-4">
                    <div class="col-12 text-center welcome">
                        <h2>
                            Time left
                        </h2>
                    </div>
                </div>
                <hr class="mt-4" style="height: 0.15rem; width: 70%; background-color: #272926; margin: auto;">
                <div class="row mt-3">
                    <div class="col-12 name text-center">
                        <h1>
                            <span id="timer"></span>
                        </h1>
                    </div>
                </div>
                <hr class="mt-3" style="height: 0.15rem; width: 70%; background-color: #272926; margin: auto;">
                <div class="row">
                    <div class="col-12 text-center time">
                        <h3>
                            Current Time<br><span id="time"></span>
                        </h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous">
</script>
<script type="text/javascript"> 
    function startTimer(duration, display) {
        var timer = duration, hours, minutes, seconds;
        setInterval(function () {
            hours = parseInt(timer / 60 /60, 10);
            minutes = parseInt((timer / 60) % 60, 10);
            seconds = parseInt(timer % 60, 10);
            
            hours = hours < 10 ? "0" + hours: hours;
            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;
    
            display.textContent = hours + ":" + minutes + ":" + seconds;
    
            if (--timer < 0) {
                timer = duration;
            }
        }, 1000);
    }

    window.onload = function () {
        display_ct()
        const minutes = Number(document.getElementById("timegiven").innerHTML)
        display = document.querySelector('#timer');
        startTimer(minutes*60, display);
    };

    function display_c(){
        var refresh=1000; // Refresh rate in milli seconds
        mytime=setTimeout('display_ct()',refresh)
    }
    
    function display_ct() {
        var x = new Date()
        var x1 = x.getHours( )+ ":" +  x.getMinutes() + ":" +  x.getSeconds();
        document.getElementById('time').innerHTML = x1;
        display_c();
     }
    </script>
</body>
</html>